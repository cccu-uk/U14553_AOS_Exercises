<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Job Control - AOS Exercises</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Labs</li><li class="chapter-item expanded "><a href="../Multi-ThreadedScripting-ProcessManagement/Multi-ThreadedScripting-ProcessManagement.html"><strong aria-hidden="true">2.</strong> Multi-Threaded Scripting & Process Management</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> System Statistics Script</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> RFC Logger Script</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Man page Example</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Scheduling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Daemons</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Shell Stuff</li><li class="chapter-item expanded "><a href="../Shell/shell.html"><strong aria-hidden="true">8.</strong> Shell</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Shell/installation.html"><strong aria-hidden="true">8.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../Shell/introducing_shell.html"><strong aria-hidden="true">8.2.</strong> Introducing the Shell</a></li><li class="chapter-item expanded "><a href="../Shell/fileDir.html"><strong aria-hidden="true">8.3.</strong> Navigating File and Directories</a></li><li class="chapter-item expanded "><a href="../Shell/create.html"><strong aria-hidden="true">8.4.</strong> Working with FIles and Directories</a></li><li class="chapter-item expanded "><a href="../Shell/pipefilter.html"><strong aria-hidden="true">8.5.</strong> Pipes and Filters</a></li><li class="chapter-item expanded "><a href="../Shell/loops.html"><strong aria-hidden="true">8.6.</strong> Loop</a></li><li class="chapter-item expanded "><a href="../Shell/scripts.html"><strong aria-hidden="true">8.7.</strong> Scripts</a></li><li class="chapter-item expanded "><a href="../Shell/find.html"><strong aria-hidden="true">8.8.</strong> Finding Things</a></li><li class="chapter-item expanded "><a href="../Shell/reference.html"><strong aria-hidden="true">8.9.</strong> Summary of Basic Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../Shell_Extras/introduction.html"><strong aria-hidden="true">9.</strong> Extra Shell</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Shell_Extras/manfiles.html"><strong aria-hidden="true">9.1.</strong> Manual Pages</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/workremote.html"><strong aria-hidden="true">9.2.</strong> Working Remotely</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/permissions.html"><strong aria-hidden="true">9.3.</strong> Permissions</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/dirstruct.html"><strong aria-hidden="true">9.4.</strong> Working with Files and Directories</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/jobs.html" class="active"><strong aria-hidden="true">9.5.</strong> Job Control</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/aliases.html"><strong aria-hidden="true">9.6.</strong> Aliases and bash customisation</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/shellvars.html"><strong aria-hidden="true">9.7.</strong> Shell Variables</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/references.html"><strong aria-hidden="true">9.8.</strong> Summary of Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../Shell_Style_Guide/shellstyleguide.html"><strong aria-hidden="true">10.</strong> Shell Style Guide</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Git</li><li class="chapter-item expanded "><a href="../myFirstRepository/myFirstRepository.html"><strong aria-hidden="true">11.</strong> My First Repository</a></li><li class="chapter-item expanded "><a href="../BranchingModel/BranchingModel.html"><strong aria-hidden="true">12.</strong> Branching-Strategy</a></li><li class="chapter-item expanded "><a href="../OneFlow/OneFlow.html"><strong aria-hidden="true">13.</strong> Git Oneflow</a></li><li class="chapter-item expanded "><a href="../AntiPatterns/AntiPatterns.html"><strong aria-hidden="true">14.</strong> Anti Patterns</a></li><li class="chapter-item expanded "><a href="../ContinousDeployment/ContinousDeployment.html"><strong aria-hidden="true">15.</strong> Continous Deployment</a></li><li class="chapter-item expanded "><a href="../ReleaseDeployment/ReleaseDeployment.html"><strong aria-hidden="true">16.</strong> Release Deployment</a></li><li class="chapter-item expanded "><a href="../Migration/Migration.html"><strong aria-hidden="true">17.</strong> Migration</a></li><li class="chapter-item expanded affix "><li class="part-title">Operating Systems/ Virtual Machines</li><li class="chapter-item expanded "><a href="../OS/Introduction.html"><strong aria-hidden="true">18.</strong> OS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../OS/nixOS/nixOS.html"><strong aria-hidden="true">18.1.</strong> NixOS</a></li><li class="chapter-item expanded "><a href="../OS/arch/arch.html"><strong aria-hidden="true">18.2.</strong> Arch</a></li><li class="chapter-item expanded "><a href="../OS/RPIOS/rpios.html"><strong aria-hidden="true">18.3.</strong> Raspberry Pi OS</a></li><li class="chapter-item expanded "><a href="../OS/WindowsCoreIoT/WindowsCoreIoT.html"><strong aria-hidden="true">18.4.</strong> Windows Core IoT</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AOS Exercises</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/cccu-uk/U14553_AOS_Exercises/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/cccu-uk/U14553_AOS_Exercises/edit/master/src/Shell_Extras/jobs.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="job-control"><a class="header" href="#job-control">Job control</a></h1>
<h4 id="questions"><a class="header" href="#questions">Questions:</a></h4>
<blockquote>
<ul>
<li>How do keep track of the process running on my machine?
&gt;</li>
<li>Can I run more than one program/script from within a shell?</li>
</ul>
</blockquote>
<h4 id="objectives"><a class="header" href="#objectives">Objectives:</a></h4>
<blockquote>
<ul>
<li>Learn how to use <code>ps</code> to get information about the state of processes</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>Learn how to control, ie., &quot;stop/pause/background/foreground&quot; processes</li>
</ul>
</blockquote>
<details>
<summary><b>TL;DR</b></summary>
<p></p>
<blockquote>
<ul>
<li>When we talk of 'job control', we really mean 'process control'
&gt;</li>
<li>A running process can be stopped, paused, and/or made to run in the background
&gt;</li>
<li>A process can be started so as to immediately run in the background
&gt;</li>
<li>Paused or backgrounded processes can be brought back into the foreground
&gt;</li>
<li>Process information can be inspected with <code>ps</code></li>
</ul>
</blockquote>
</details>
<hr />
<p>The shell-novice lesson explained how we run programs or scripts from the shell's command line.</p>
<p>We'll now take a look at how to control programs <em>once they're running</em>. This is called <a href="./references.html#job-control">job control</a>, and while it's less important today than it was back in the Dark Ages, it is coming back into its own as more people begin to leverage the power of computer networks.</p>
<p>When we talk about controlling programs, what we really mean is  controlling <em>processes</em>. As we said earlier, a process is just a program  that's in memory and executing. Some of the processes on your computer are yours: </p>
<ul>
<li>they're running programs you explicitly asked for, like your web browser. </li>
</ul>
<p>Many others belong to the operating system that manages your computer for you, or, if you're on a shared machine, to other users.</p>
<h2 id="the-ps-command"><a class="header" href="#the-ps-command">The <code>ps</code> command</a></h2>
<p>You can use the <code>ps</code> command to list processes, just as you use <code>ls</code> to list files and directories.</p>
<h2 id="behaviour-of-the-ps-command"><a class="header" href="#behaviour-of-the-ps-command">Behaviour of the <code>ps</code> command</a></h2>
<p>The <code>ps</code> command has a swathe of option flags that control its behaviour and, what's more, the sets of flags and default behaviour vary across different platforms.</p>
<p>A bare invocation of <code>ps</code> only shows you basic information about <em>your</em>, <em>active</em> processes.</p>
<p>After that, this is a command that it is worth reading the '<code>man</code> page' for.</p>
<pre><code class="language-sh">$ ps
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">  PID TTY          TIME CMD
12767 pts/0    00:00:00 bash
15283 pts/0    00:00:00 ps
</code></pre>
<p>At the time you ran the <code>ps</code> command, you had two active processes, your  (<code>bash</code>) shell and the  (<code>ps</code>) command  you had invoked in it.</p>
<p>Chances are that you were aware of that information, without needing to run a command to tell you it, so let's try and put some flesh on that bare bones information.</p>
<pre><code class="language-sh">$ ps -f
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">UID        PID  PPID  C STIME TTY          TIME CMD
vlad     12396 25397  0 14:28 pts/0    00:00:00 ps -f
vlad     25397 25396  0 12:49 pts/0    00:01:39 bash
</code></pre>
<p>In case you haven't had time to do a <code>man ps</code> yet, be aware that the <code>-f</code> flag doesn't stand for &quot;flesh on the bones&quot; but for &quot;Do full-format listing&quot;, although even then, there are &quot;fuller&quot; versions of the <code>ps</code> output.</p>
<p>But what are we being told here?</p>
<p>Every process has a unique process id (<code>PID</code>). Remember, this is a property of the process, not of the program that process is executing:</p>
<ul>
<li>if you are running three instances of your browser at once, each will have its own process <code>ID</code>.</li>
</ul>
<p>The third column in this listing, <code>PPID</code>, shows the <code>ID</code> of each process's parent. Every process on a computer is spawned by another, which is its parent (except, of course, for the bootstrap process that runs automatically when the computer starts up).</p>
<p>Clearly, the <code>ps -f</code> that was run is a child process of the (<code>bash</code>) shell it was invoked in.</p>
<p>Column 1 shows the <code>username</code> of the <code>user</code> the processes are being run by. This is the username the computer uses when checking permissions:</p>
<ul>
<li>each process is allowed to access exactly the same things as the user running it, no more, no less.</li>
</ul>
<p>Column 5, <code>STIME</code>, shows when the process started running, whilst Column 7, <code>TIME</code>, shows you how much time process has used, whilst Column 8, <code>CMD</code>, shows what program the process is executing.</p>
<p>Column 6, <code>TTY</code>, shows the ID of the terminal this process is running in. </p>
<p>Once upon a time, this really would have been a terminal connected to a central timeshared computer. It isn't as important these days, except that if a process is a system service, such as a network monitor, <code>ps</code> will display a question mark for its terminal, since it doesn't actually have one.</p>
<p>The fourth column, <code>C</code>, is an indication of the perCentage of processor
utilization.</p>
<p>Your version of <code>ps</code> may show more or fewer columns, or may show them in a different order, but the same information is generally available everywhere, and the column headers are generally consistent.</p>
<h2 id="stopping-pausing-resuming-and-backgrounding-processes"><a class="header" href="#stopping-pausing-resuming-and-backgrounding-processes">Stopping, pausing, resuming, and backgrounding, processes</a></h2>
<p>The shell provides several commands for stopping, pausing, and resuming processes. To see them in action, let's run our <code>analyze</code> program on our latest data files. After a few minutes go by, we realize that this is going to take a while to finish. Being impatient, we kill the process by typing <kbd>Control</kbd>+<kbd>C</kbd>. This stops the currently-executing program right away.</p>
<p>Any results it had calculated, but not written to disk, are lost.</p>
<pre><code class="language-sh">$ ./analyze results*.dat
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">...a few minutes pass...
^C
</code></pre>
<p>Let's run that same command again, with an ampersand <code>&amp;</code> at the end of the line to tell the shell we want it to run in the <a href="./references.html#background">background</a>:</p>
<pre><code class="language-sh">$ ./analyze results*.dat &amp;
</code></pre>
<p>When we do this, the shell launches the program as before. Instead of leaving our keyboard and screen connected to the program's standard input and output, though, the shell hangs onto them. This means the shell can give us a fresh command prompt, and start running other commands, right away. Here, for example, we're putting some parameters for the next run of the program in a file:</p>
<pre><code class="language-sh">$ cat &gt; params.txt
density: 22.0
viscosity: 0.75
^D
</code></pre>
<p>(Remember, ^D is the shell's way of showing Control-D, which means &quot;end of input&quot;.)</p>
<p>Now let's run the <code>jobs</code> command, which tells us what processes are currently running in the background:</p>
<pre><code class="language-sh">$ jobs
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">[1] ./analyze results01.dat results02.dat results03.dat
</code></pre>
<p>Since we're about to go and get coffee, we might as well use the foreground command, <code>fg</code>, to bring our background job into the foreground:</p>
<pre><code class="language-sh">$ fg
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">...a few minutes pass...
</code></pre>
<p>When <code>analyze</code> finishes running, the shell gives us a fresh prompt as usual. If we had several jobs running in the background, we could control which one we brought to the foreground using <code>fg %1</code>, <code>fg %2</code>, and so on. The IDs are <em>not</em> the process IDs. Instead, they are the job IDs displayed by the <code>jobs</code> command.</p>
<p>The shell gives us one more tool for job control: if a process is already running in the foreground, <kbd>Control</kbd>+<kbd>Z</kbd> will pause it and return control to the shell. We can then use <code>fg</code> to resume it in the foreground, or <code>bg</code> to resume it as a background job.</p>
<p>For example, let's run <code>analyze</code> again, and then type <kbd>Control</kbd>+<kbd>Z</kbd>. The shell immediately tells us that our program has been stopped, and gives us its job number:</p>
<pre><code class="language-sh">$ ./analyze results01.dat
^Z
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">[1]  Stopped   ./analyze results01.dat
</code></pre>
<p>If we type <code>bg %1</code>, the shell starts the process running again, but in the background. We can check that it's running using <code>jobs</code>, and kill it while it's still in the background using <code>kill</code> and the job number. </p>
<p>This has the same effect as bringing it to the foreground and then typing
<kbd>Control</kbd>+<kbd>C</kbd>:</p>
<pre><code class="language-sh">$ bg %1

$ jobs
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">[1] ./analyze results01.dat
</code></pre>
<p>...</p>
<pre><code class="language-sh">$ kill %1
</code></pre>
<p>Job control was important when users only had one terminal window at a time. It's less important now: if we want to run another program, it's easy enough to open another window and run it there. </p>
<p>However, these ideas and tools are making a comeback, as they're often the easiest way to run and control programs on remote computers elsewhere on the
network. This lesson's <a href="./workremote.html">ssh episode</a> has more to say about that.</p>
<p><a href="introduction.html">Back to Contents Page</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Shell_Extras/dirstruct.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../Shell_Extras/aliases.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Shell_Extras/dirstruct.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../Shell_Extras/aliases.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
