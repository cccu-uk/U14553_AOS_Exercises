<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Working Remotely - AOS Exercises</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Labs</li><li class="chapter-item expanded "><a href="../Multi-ThreadedScripting-ProcessManagement/Multi-ThreadedScripting-ProcessManagement.html"><strong aria-hidden="true">2.</strong> Multi-Threaded Scripting & Process Management</a></li><li class="chapter-item expanded "><a href="../Learning_C/Learning_C.html"><strong aria-hidden="true">3.</strong> Learning C</a></li><li class="chapter-item expanded "><a href="../SystemCalls/SystemCalls.html"><strong aria-hidden="true">4.</strong> System Calls</a></li><li class="chapter-item expanded "><a href="../RFC_Logger/rfclogger.html"><strong aria-hidden="true">5.</strong> RFC Logger Script</a></li><li class="chapter-item expanded "><a href="../Daemons/daemons.html"><strong aria-hidden="true">6.</strong> Daemons</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> System Statistics Script</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Man page Example</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Scheduling</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Shell Stuff</li><li class="chapter-item expanded "><a href="../Shell/shell.html"><strong aria-hidden="true">10.</strong> Shell</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Shell/installation.html"><strong aria-hidden="true">10.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../Shell/introducing_shell.html"><strong aria-hidden="true">10.2.</strong> Introducing the Shell</a></li><li class="chapter-item expanded "><a href="../Shell/fileDir.html"><strong aria-hidden="true">10.3.</strong> Navigating File and Directories</a></li><li class="chapter-item expanded "><a href="../Shell/create.html"><strong aria-hidden="true">10.4.</strong> Working with FIles and Directories</a></li><li class="chapter-item expanded "><a href="../Shell/pipefilter.html"><strong aria-hidden="true">10.5.</strong> Pipes and Filters</a></li><li class="chapter-item expanded "><a href="../Shell/loops.html"><strong aria-hidden="true">10.6.</strong> Loop</a></li><li class="chapter-item expanded "><a href="../Shell/scripts.html"><strong aria-hidden="true">10.7.</strong> Scripts</a></li><li class="chapter-item expanded "><a href="../Shell/find.html"><strong aria-hidden="true">10.8.</strong> Finding Things</a></li><li class="chapter-item expanded "><a href="../Shell/reference.html"><strong aria-hidden="true">10.9.</strong> Summary of Basic Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../Shell_Extras/introduction.html"><strong aria-hidden="true">11.</strong> Extra Shell</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Shell_Extras/manfiles.html"><strong aria-hidden="true">11.1.</strong> Manual Pages</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/workremote.html" class="active"><strong aria-hidden="true">11.2.</strong> Working Remotely</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/permissions.html"><strong aria-hidden="true">11.3.</strong> Permissions</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/dirstruct.html"><strong aria-hidden="true">11.4.</strong> Working with Files and Directories</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/jobs.html"><strong aria-hidden="true">11.5.</strong> Job Control</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/aliases.html"><strong aria-hidden="true">11.6.</strong> Aliases and bash customisation</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/shellvars.html"><strong aria-hidden="true">11.7.</strong> Shell Variables</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/references.html"><strong aria-hidden="true">11.8.</strong> Summary of Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../Shell_Style_Guide/shellstyleguide.html"><strong aria-hidden="true">12.</strong> Shell Style Guide</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Git</li><li class="chapter-item expanded "><a href="../myFirstRepository/myFirstRepository.html"><strong aria-hidden="true">13.</strong> My First Repository</a></li><li class="chapter-item expanded "><a href="../BranchingModel/BranchingModel.html"><strong aria-hidden="true">14.</strong> Branching-Strategy</a></li><li class="chapter-item expanded "><a href="../OneFlow/OneFlow.html"><strong aria-hidden="true">15.</strong> Git Oneflow</a></li><li class="chapter-item expanded "><a href="../AntiPatterns/AntiPatterns.html"><strong aria-hidden="true">16.</strong> Anti Patterns</a></li><li class="chapter-item expanded "><a href="../ContinousDeployment/ContinousDeployment.html"><strong aria-hidden="true">17.</strong> Continous Deployment</a></li><li class="chapter-item expanded "><a href="../ReleaseDeployment/ReleaseDeployment.html"><strong aria-hidden="true">18.</strong> Release Deployment</a></li><li class="chapter-item expanded "><a href="../Migration/Migration.html"><strong aria-hidden="true">19.</strong> Migration</a></li><li class="chapter-item expanded affix "><li class="part-title">Operating Systems/ Virtual Machines</li><li class="chapter-item expanded "><a href="../OS/Introduction.html"><strong aria-hidden="true">20.</strong> OS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../OS/nixOS/nixOS.html"><strong aria-hidden="true">20.1.</strong> NixOS</a></li><li class="chapter-item expanded "><a href="../OS/arch/arch.html"><strong aria-hidden="true">20.2.</strong> Arch</a></li><li class="chapter-item expanded "><a href="../OS/RPIOS/rpios.html"><strong aria-hidden="true">20.3.</strong> Raspberry Pi OS</a></li><li class="chapter-item expanded "><a href="../OS/WindowsCoreIoT/WindowsCoreIoT.html"><strong aria-hidden="true">20.4.</strong> Windows Core IoT</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AOS Exercises</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/cccu-uk/U14553_AOS_Exercises/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/cccu-uk/U14553_AOS_Exercises/edit/master/src/Shell_Extras/workremote.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="working-remotely"><a class="header" href="#working-remotely">Working Remotely</a></h1>
<h4 id="questions"><a class="header" href="#questions">Questions:</a></h4>
<blockquote>
<ul>
<li>How do I use '<code>ssh</code>' and '<code>scp</code>' ?</li>
</ul>
</blockquote>
<h4 id="objectives"><a class="header" href="#objectives">Objectives:</a></h4>
<blockquote>
<ul>
<li>Learn what SSH is
&gt;</li>
<li>Learn what an SSH key is
&gt;</li>
<li>Generate your own SSH key pair
&gt;</li>
<li>Learn how to use your SSH key
&gt;</li>
<li>Learn how to work remotely using <code>ssh</code> and <code>scp</code>
&gt;</li>
<li>Add your SSH key to an remote server</li>
</ul>
</blockquote>
<details>
<summary><b>TL;DR</b></summary>
<p></p>
<blockquote>
<ul>
<li>SSH is a secure alternative to username/password authorization
&gt;</li>
<li>SSH keys are generated in public/private pairs. Your public key can be  shared with others. The private keys stays on your machine only.
&gt;</li>
<li>The 'ssh' and 'scp' utilities are secure alternatives to logging into,  and copying files to/from remote machine</li>
</ul>
</blockquote>
</details>
<hr />
<p>Let's take a closer look at what happens when we use the shell on a desktop or laptop computer.</p>
<p>The first step is to log in so that the operating system knows who we are and what we're allowed to do.</p>
<p>We do this by typing our username and password; the operating system checks those values against its records, and if they match, runs a shell for us.</p>
<p>As we type commands, the 1's and 0's that represent the characters we're typing are sent from the keyboard to the shell.</p>
<p>The shell displays those characters on the screen to represent what we type,
and then, if what we typed was a command, the shell executes it and displays its output (if any).</p>
<p>What if we want to run some commands on another machine, such as the server in the basement that manages our database of experimental results?</p>
<p>To do this, we have to first log in to that machine.</p>
<p>We call this a <a href="%7B./references.html#remote-login">remote login</a>.</p>
<p>In order for us to be able to login, the remote computer must be running  a <a href="./references.html#remote-login-server">remote login server</a> and we will run a client program that can talk to that server.</p>
<p>The client program passes our login credentials to the remote login server and, if we are allowed to login, that server then runs a shell for us on the  remote computer.</p>
<p>Once our local client is connected to the remote server, everything we type into the client is passed on, by the server, to the shell running on the remote computer.</p>
<p>That remote shell runs those commands on our behalf, just as a local shell would, then sends back output, via the server, to our client, for our computer to display.</p>
<h2 id="ssh-history"><a class="header" href="#ssh-history">SSH History</a></h2>
<p>Back in the day, when everyone trusted each other and knew every chip in their computer by its first name, people didn't encrypt anything except the most sensitive information when sending it over a network and the two programs used for running a shell (usually back then, the Bourne Shell, <code>sh</code>) on, or copying files to, a remote machine were named <code>rsh</code> and <code>rcp</code>, respectively. Think (<code>r</code>)emote <code>sh</code> and <code>cp</code></p>
<p>However, anyone could watch the unencrypted network traffic, which meant that villains could steal usernames and passwords, and use them for all manner of nefarious purposes.</p>
<p>The <a href="%7B./references.html#ssh-protocol">SSH protocol</a> was invented to prevent this (or at least slow it down).</p>
<p>It uses several sophisticated, and heavily tested, encryption protocols to ensure that outsiders can't see what's in the messages going back and forth between different computers.</p>
<p>The remote login server which accepts connections from client programs is known as the <a href="./referencesm.html#ssh-daemon">SSH daemon</a>, or <code>sshd</code>.</p>
<p>The client program we use to login remotely is the <a href="./references.html#secure-shell">secure shell</a>, or <code>ssh</code>, think (<code>s</code>)ecure <code>sh</code>. </p>
<p>The <code>ssh</code> login client has a companion program called <code>scp</code>, think  (<code>s</code>)ecure <code>cp</code>,  which allows us to copy files to or from a remote computer using the same kind of encrypted connection.</p>
<h2 id="a-remote-login-using-ssh"><a class="header" href="#a-remote-login-using-ssh">A remote login using <code>ssh</code></a></h2>
<p>To make a remote login, we issue the command <code>ssh username@computer</code>  which tries to make a connection to the SSH daemon running on the remote computer we have specified.</p>
<p>After we log in, we can use the remote shell to use the remote computer's files and directories.</p>
<p>Typing <code>exit</code> or <kbd>CTRL+D</kbd> terminates the remote shell, and the local client program, and returns us to our previous shell.</p>
<p>In the example below, the remote machine's command prompt is <code>moon&gt;</code>
instead of just <code>$</code>.</p>
<p>To make it clearer which machine is doing what, we'll indent the commands sent to the remote machine and their output.</p>
<pre><code class="language-sh">$ pwd
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">/users/vlad
</code></pre>
<p>...</p>
<pre><code class="language-sh">$ ssh vlad@moon.euphoric.edu
Password: ********
</code></pre>
<p>...</p>
<pre><code class="language-sh">moon&gt; hostname
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">moon
</code></pre>
<p>...</p>
<pre><code class="language-sh">moon&gt; pwd
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">/home/vlad
</code></pre>
<p>...</p>
<pre><code class="language-sh">moon&gt; ls -F
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">bin/     cheese.txt   dark_side/   rocks.cfg
</code></pre>
<p>...</p>
<pre><code class="language-sh">moon&gt; exit
</code></pre>
<p>...</p>
<pre><code class="language-sh">$ pwd
</code></pre>
<p>Ouput:</p>
<pre><code class="language-sh">/users/vlad
</code></pre>
<h2 id="copying-files-to-and-from-a-remote-machine-using-scp"><a class="header" href="#copying-files-to-and-from-a-remote-machine-using-scp">Copying files to, and from a remote machine using <code>scp</code></a></h2>
<p>To copy a file, we specify the source and destination paths,
either of which may include computer names.</p>
<p>If we leave out a computer name, <code>scp</code> assumes we mean the machine we're running on.</p>
<p>For example, this command copies our latest results to the backup server in the basement,
printing out its progress as it does so:</p>
<pre><code class="language-sh">$ scp results.dat vlad@backupserver:backups/results-2011-11-11.dat
Password: ********
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">results.dat              100%  9  1.0 MB/s 00:00
</code></pre>
<p>Note the colon <code>:</code>, seperating the hostname of the server and the pathname of  the file we are copying to.</p>
<p>It is this character that informs <code>scp</code> that the source or target of the copy is on the remote machine and the reason it is needed can be explained as follows:</p>
<p>In the same way that the default directory into which we are placed when running a shell on a remote machine is our home directory on that machine, the default target, for a remote copy, is also the  home directory.</p>
<p>This means that...</p>
<pre><code class="language-sh">$ scp results.dat vlad@backupserver:
</code></pre>
<p>... would copy <code>results.dat</code> into our home directory on <code>backupserver</code>, however, if we did not have the colon to inform <code>scp</code> of the remote machine, we would still have a valid commmad...</p>
<pre><code class="language-sh">$ scp results.dat vlad@backupserver
</code></pre>
<p>...but now we have merely created a file called <code>vlad@backupserver</code> on our local machine, as we would have done with <code>cp</code>.</p>
<pre><code class="language-sh">$ cp results.dat vlad@backupserver
</code></pre>
<p>Copying a whole directory betwen remote machines uses the same syntax as the <code>cp</code> command:</p>
<p>We just use the <code>-r</code> option to signal that we want copying to be recursively.</p>
<p>For example, this command copies all of our results from the backup server to our laptop:</p>
<pre><code class="language-sh">$ scp -r vlad@backupserver:backups ./backups
Password: ********
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">results-2011-09-18.dat              100%  7  1.0 MB/s 00:00
results-2011-10-04.dat              100%  9  1.0 MB/s 00:00
results-2011-10-28.dat              100%  8  1.0 MB/s 00:00
results-2011-11-11.dat              100%  9  1.0 MB/s 00:00
</code></pre>
<h2 id="running-commands-on-a-remote-machine-using-ssh"><a class="header" href="#running-commands-on-a-remote-machine-using-ssh">Running commands on a remote machine using <code>ssh</code></a></h2>
<p>Here's one more thing the <code>ssh</code> client program can do for us.</p>
<p>Suppose we want to check whether we have already created the file <code>backups/results-2011-11-12.dat</code> on the backup server.</p>
<p>Instead of logging in and then typing <code>ls</code>, we could do this:</p>
<pre><code class="language-sh">$ ssh vlad@backupserver &quot;ls results*&quot;
Password: ********
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">results-2011-09-18.dat  results-2011-10-28.dat
results-2011-10-04.dat  results-2011-11-11.dat
</code></pre>
<p>Here, <code>ssh</code> takes the argument after our remote username and passes them to the shell on the remote computer.</p>
<p>(We have to put quotes around it to make it look like a single argument.)</p>
<p>Since those arguments are a legal command, the remote shell runs <code>ls results</code> for us and sends the output back to our local shell for display.</p>
<h2 id="ssh-keys"><a class="header" href="#ssh-keys">SSH Keys</a></h2>
<p>Typing our password over and over again is annoying, especially if the commands we want to run remotely are in a loop.</p>
<p>To remove the need to do this, we can create an [SSH key]({{ page.root }}/reference/{{ site.index }}#ssh-key) to tell the remote machine that it should always trust us.</p>
<p>SSH keys come in pairs, a public key that gets shared with services like GitHub, and a private key that is stored only on your computer. If the keys match, you're granted access.</p>
<p>The cryptography behind SSH keys ensures that no one can reverse engineer your private key from the public one.</p>
<p>The first step in using SSH authorization is to generate your own key pair.</p>
<p>You might already have an SSH key pair on your machine. You can check to see if one exists by moving to your <code>.ssh</code> directory and listing the contents.</p>
<pre><code class="language-sh">$ cd ~/.ssh
$ ls
</code></pre>
<p>If you see <code>id_rsa.pub</code>, you already have a key pair and don't need to create a new one.</p>
<p>If you don't see <code>id_rsa.pub</code>, use the following command to generate a new key pair. </p>
<p>Make sure to replace <code>your@email.com</code> with your own email address.</p>
<pre><code class="language-sh">$ ssh-keygen -t rsa -C &quot;your@email.com&quot;
</code></pre>
<p>When asked where to save the new key, hit enter to accept the default location.</p>
<p>Output:</p>
<pre><code class="language-sh">Generating public/private rsa key pair.
Enter file in which to save the key (/Users/username/.ssh/id_rsa):
</code></pre>
<p>You will then be asked to provide an optional passphrase. This can be used to make your key even more secure, but if what you want is avoiding type your password every time you can skip it by hitting enter twice.</p>
<pre><code class="language-sh">Enter passphrase (empty for no passphrase):
Enter same passphrase again:
</code></pre>
<p>When the key generation is complete, you should see the following confirmation:</p>
<pre><code class="language-sh">Your identification has been saved in /Users/username/.ssh/id_rsa.
Your public key has been saved in /Users/username/.ssh/id_rsa.pub.
The key fingerprint is:
01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your@email.com
The key's randomart image is:
+--[ RSA 2048]----+
|                 |
|                 |
|        . E +    |
|       . o = .   |
|      . S =   o  |
|       o.O . o   |
|       o .+ .    |
|      . o+..     |
|       .+=o      |
+-----------------+
</code></pre>
<p>The random art image is an alternate way to match keys but we won't be needing this.</p>
<p>Now you need to place a copy of your public key ony any servers you would like to use SSH to connect to, instead of logging in with a username and <code>passwd</code>.</p>
<p>Display the contents of your new public key file with <code>cat</code>:</p>
<pre><code class="language-sh">$ cat ~/.ssh/id_rsa.pub
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA879BJGYlPTLIuc9/R5MYiN4yc/YiCLcdBpSdzgK9Dt0Bkfe3rSz5cPm4wmehdE7GkVFXrBJ2YHqPLuM1yx1AUxIebpwlIl9f/aUHOts9eVnVh4NztPy0iSU/Sv0b2ODQQvcy2vYcujlorscl8JjAgfWsO3W4iGEe6QwBpVomcME8IU35v5VbylM9ORQa6wvZMVrPECBvwItTY8cPWH3MGZiK/74eHbSLKA4PY3gM4GHI450Nie16yggEg2aTQfWA1rry9JYWEoHS9pJ1dnLqZU3k/8OWgqJrilwSoC5rGjgp93iu0H8T6+mEHGRQe84Nk1y5lESSWIbn6P636Bl3uQ== your@email.com
</code></pre>
<p>Copy the contents of the output.</p>
<p>Login to the remote server with your username and password.</p>
<pre><code class="language-sh">$ ssh vlad@moon.euphoric.edu
Password: ********
</code></pre>
<p>Paste the content that you copy at the end of <code>~/.ssh/authorized_keys</code>. </p>
<pre><code class="language-sh">moon&gt; nano ~/.ssh/authorized_keys
</code></pre>
<p>After append the content, logout of the remote machine and try login again. If you setup your SSH key correctly you won't need to type your password.</p>
<pre><code class="language-sh">moon&gt; exit
</code></pre>
<p>...</p>
<pre><code class="language-sh">$ ssh vlad@moon.euphoric.edu
</code></pre>
<h2 id="ssh-files-and-directories"><a class="header" href="#ssh-files-and-directories">SSH Files and Directories</a></h2>
<p>The example of copying our public key to a remote machine, so that it  can then be used when we next SSH into that remote machine, assumed that we already had a directory <code>~/.ssh/</code>.</p>
<p>Whilst a remote server may support the use of SSH to login, your home directory there may not contain a <code>.ssh</code> directory by default.</p>
<p>We have already seen that we can use SSH to run commands on remote machines, so we can ensure that everything is set up as required before we place the copy of our public key on a remote machine.</p>
<p>Walking through this process allows us to highlight some of the typical  requirements of the SSH protocol itself, as documented in the man-page for the <code>ssh</code> command.</p>
<p>Firstly, we check that we have a <code>.ssh/</code> directory on another remote machine, <code>comet</code></p>
<pre><code class="language-sh">$ ssh vlad@comet &quot;ls -ld ~/.ssh&quot;
Password: ********
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">    ls: cannot access /home/vlad/.ssh: No such file or directory
</code></pre>
<p>Oh dear! We should create the directory; and check that it's there (Note: two commands, seperated by a semicolon) :</p>
<pre><code class="language-sh">$ ssh vlad@comet &quot;mkdir ~/.ssh; ls -ld ~/.ssh&quot;
Password: ********
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">    drwxr-xr-x 2 vlad vlad 512 Jan 01 09:09 /home/vlad/.ssh
</code></pre>
<p>Now we have a dot-SSH directory, into which to place SSH-related files but we can see that the default permissions allow anyone to inspect the files within that directory.</p>
<p>For a protocol that is supposed to be secure, this is not considered a good thing and so the recommended permissions are read/write/execute for the user, and not accessible by others.</p>
<p>Let's alter the permissions on the directory</p>
<pre><code class="language-sh">$ ssh vlad@comet &quot;chmod 700 ~/.ssh; ls -ld ~/.ssh&quot;
Password: ********
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">    drwx------ 2 vlad vlad 512 Jan 01 09:09 /home/vlad/.ssh
</code></pre>
<p>That's looks much better.</p>
<p>In the above example, it was suggested that we paste the content of our public key at the end of <code>~/.ssh/authorized_keys</code>, however as we didn't have a <code>~/.ssh/</code> on this remote machine, we can simply copy our public key over as the initial <code>~/.ssh/authorized_keys</code>, and of course, we will use <code>scp</code> to do this, even though we don't yet have passwordless SSH access set up.</p>
<pre><code class="language-sh">$ scp ~/.ssh/id_rsa.pub vlad@comet:.ssh/authorized_keys
Password: ********
</code></pre>
<p>Note that the default target for the <code>scp</code> command on a remote machine is the home directory, so we have not needed to use the shorthand <code>~/.ssh/</code> or even the full path <code>/home/vlad/.ssh/</code> to  our home directory there.</p>
<p>Checking the permissions of the file we have just created on the remote machine, also serves to indicate that we no longer need to use our password, because we now have what's needed to use SSH without it.</p>
<pre><code class="language-sh">$ ssh vlad@comet &quot;ls -l ~/.ssh&quot;
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">    -rw-r--r-- 2 vlad vlad 512 Jan 01 09:11 /home/vlad/.ssh/authorized_keys
</code></pre>
<p>Whilst the authorized keys file is not considered to be highly sensitive,  (after all, it contains public keys), we alter the permissions to match the man page's recommendations :</p>
<pre><code class="language-sh">$ ssh vlad@comet &quot;chmod go-r ~/.ssh/authorized_keys; ls -l ~/.ssh&quot;
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">    -rw------- 2 vlad vlad 512 Jan 01 09:11 /home/vlad/.ssh/authorized_keys
</code></pre>
<p><a href="introduction.html">Back to Contents Page</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Shell_Extras/manfiles.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../Shell_Extras/permissions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Shell_Extras/manfiles.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../Shell_Extras/permissions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
