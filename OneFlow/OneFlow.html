<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Git Oneflow - AOS Exercises</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Labs</li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> System Statistics Script</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> RFC Logger Script</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Man page Example</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Scheduling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Daemons</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Multi-Threaded Scripting & Process Management</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Shell Stuff</li><li class="chapter-item expanded "><a href="../Shell/shell.html"><strong aria-hidden="true">8.</strong> Shell</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Shell/installation.html"><strong aria-hidden="true">8.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../Shell/introducing_shell.html"><strong aria-hidden="true">8.2.</strong> Introducing the Shell</a></li><li class="chapter-item expanded "><a href="../Shell/fileDir.html"><strong aria-hidden="true">8.3.</strong> Navigating File and Directories</a></li><li class="chapter-item expanded "><a href="../Shell/create.html"><strong aria-hidden="true">8.4.</strong> Working with FIles and Directories</a></li><li class="chapter-item expanded "><a href="../Shell/pipefilter.html"><strong aria-hidden="true">8.5.</strong> Pipes and Filters</a></li><li class="chapter-item expanded "><a href="../Shell/loops.html"><strong aria-hidden="true">8.6.</strong> Loop</a></li><li class="chapter-item expanded "><a href="../Shell/scripts.html"><strong aria-hidden="true">8.7.</strong> Scripts</a></li><li class="chapter-item expanded "><a href="../Shell/find.html"><strong aria-hidden="true">8.8.</strong> Finding Things</a></li><li class="chapter-item expanded "><a href="../Shell/reference.html"><strong aria-hidden="true">8.9.</strong> Summary of Basic Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../Shell_Extras/introduction.html"><strong aria-hidden="true">9.</strong> Extra Shell</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Shell_Extras/manfiles.html"><strong aria-hidden="true">9.1.</strong> Manual Pages</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/workremote.html"><strong aria-hidden="true">9.2.</strong> Working Remotely</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/permissions.html"><strong aria-hidden="true">9.3.</strong> Permissions</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/dirstruct.html"><strong aria-hidden="true">9.4.</strong> Working with Files and Directories</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/jobs.html"><strong aria-hidden="true">9.5.</strong> Job Control</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/aliases.html"><strong aria-hidden="true">9.6.</strong> Aliases and bash customisation</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/shellvars.html"><strong aria-hidden="true">9.7.</strong> Shell Variables</a></li><li class="chapter-item expanded "><a href="../Shell_Extras/references.html"><strong aria-hidden="true">9.8.</strong> Summary of Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../Shell_Style_Guide/shellstyleguide.html"><strong aria-hidden="true">10.</strong> Shell Style Guide</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Git</li><li class="chapter-item expanded "><a href="../myFirstRepository/myFirstRepository.html"><strong aria-hidden="true">11.</strong> My First Repository</a></li><li class="chapter-item expanded "><a href="../BranchingModel/BranchingModel.html"><strong aria-hidden="true">12.</strong> Branching-Strategy</a></li><li class="chapter-item expanded "><a href="../OneFlow/OneFlow.html" class="active"><strong aria-hidden="true">13.</strong> Git Oneflow</a></li><li class="chapter-item expanded "><a href="../AntiPatterns/AntiPatterns.html"><strong aria-hidden="true">14.</strong> Anti Patterns</a></li><li class="chapter-item expanded "><a href="../ContinousDeployment/ContinousDeployment.html"><strong aria-hidden="true">15.</strong> Continous Deployment</a></li><li class="chapter-item expanded "><a href="../ReleaseDeployment/ReleaseDeployment.html"><strong aria-hidden="true">16.</strong> Release Deployment</a></li><li class="chapter-item expanded "><a href="../Migration/Migration.html"><strong aria-hidden="true">17.</strong> Migration</a></li><li class="chapter-item expanded affix "><li class="part-title">Operating Systems/ Virtual Machines</li><li class="chapter-item expanded "><a href="../OS/Introduction.html"><strong aria-hidden="true">18.</strong> OS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../OS/nixOS/nixOS.html"><strong aria-hidden="true">18.1.</strong> NixOS</a></li><li class="chapter-item expanded "><a href="../OS/arch/arch.html"><strong aria-hidden="true">18.2.</strong> Arch</a></li><li class="chapter-item expanded "><a href="../OS/RPIOS/rpios.html"><strong aria-hidden="true">18.3.</strong> Raspberry Pi OS</a></li><li class="chapter-item expanded "><a href="../OS/WindowsCoreIoT/WindowsCoreIoT.html"><strong aria-hidden="true">18.4.</strong> Windows Core IoT</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AOS Exercises</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/cccu-uk/U14553_AOS_Exercises/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/cccu-uk/U14553_AOS_Exercises/edit/master/src/OneFlow/OneFlow.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="git-oneflow"><a class="header" href="#git-oneflow">Git Oneflow</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>OneFlow has been conceived as a simpler alternative to GitFlow. However, please don’t read “simpler” as “less able”. OneFlow’s branching model is exactly as powerful as GitFlow’s. There is not a single thing that can be done using GitFlow that can’t be achieved (in a simpler way) with OneFlow. The description below goes into more detail.</p>
<p>As the name suggests, OneFlow’s basic premise is to have one eternal branch in your repository. This brings a number of advantages (see below) without losing any expressivity of the branching model – the more advanced use cases are made possible through the usage of Git tags.</p>
<p>While the workflow advocates having one long-lived branch, that doesn’t mean there aren’t other branches involved when using it. On the contrary, the branching model encourages using a variety of support branches (see below for the details). What is important, though, is that they are meant to be short-lived, and their main purpose is to facilitate code sharing and act as a backup. The history is always based on the one infinite lifetime branch.</p>
<h2 id="oneflow-advantages"><a class="header" href="#oneflow-advantages">OneFlow advantages</a></h2>
<p>Maintaining a single long-lived branch simplifies the versioning scheme and day-to-day operations that developers have to perform considerably.</p>
<p>It also makes the project history cleaner and more readable, and thus more useful.</p>
<h2 id="when-to-use-oneflow"><a class="header" href="#when-to-use-oneflow">When to use OneFlow</a></h2>
<p>OneFlow is meant to be a drop-in replacement for GitFlow, which means it’s suitable in all situations that GitFlow is. In fact, you can quite easily migrate a project that is using GitFlow to OneFlow.</p>
<p>The main condition that needs to be satisfied in order to use OneFlow for a project is that every new production release is based on the previous release (GitFlow has exactly the same requirement). The vast majority of software projects fulfill that condition. If your project is a web application, for instance, then OneFlow should be a great fit. Most open-source projects could be versioned using OneFlow as well.</p>
<h2 id="when-not-to-use-oneflow"><a class="header" href="#when-not-to-use-oneflow">When NOT to use OneFlow</a></h2>
<p>While OneFlow is pretty flexible, it’s not suitable for every project. OneFlow will be a bad fit in basically the same circumstances that GitFlow would be. There are 2 main reasons why that might be the case.</p>
<p>First, when the above condition (“every new production release is based on the previous one”) is not satisfied. As an example, take the Python programming language. It has two incompatible versions, 2 and 3. Both of them receive bugfixes and security patches – however, that doesn’t mean a new release of Python 3 is based on the commit of the latest release of Python 2. The two versions have diverged, and while they surely share a lot of code, you can’t say that one is based on the other (talking from a purely version control perspective).</p>
<p>If your project needs to maintain multiple simultaneous yet incompatible release versions that way, then OneFlow won’t work for you out of the box. You can surely use elements of it – probably each individual version can be managed using OneFlow, for example. However, in these types of projects, the main challenge is usually in the interactions between the versions and how to effectively share code between them, and OneFlow was not designed to be a solution to that problem.</p>
<p>Second, if your project has a high degree of automation – uses Continuous Delivery, or even Continuous Deployment, for example – then this workflow will most likely be too heavy for you. Perhaps parts of it might still be useful, but other elements (like the release process, for instance) would have to be heavily modified to make sense when releasing on such a very frequent cadence.</p>
<h2 id="detailed-description"><a class="header" href="#detailed-description">Detailed description</a></h2>
<h3 id="the-main-branch"><a class="header" href="#the-main-branch">The main branch</a></h3>
<p>Like was explained before, the workflow uses only one eternal branch. The name doesn’t matter, and can be anything you want. We will use <code>master\main</code> in this description, as it’s probably the most common name, and is already a Git convention, but you can also use, for example, <code>current</code>, <code>default</code>, <code>mainline</code>, or anything else.</p>
<h3 id="feature-branches"><a class="header" href="#feature-branches">Feature Branches</a></h3>
<p>Feature branches (also sometimes called topic branches) are where the day-to-day development work happens – hence, they are by far the most common of all the support branches. They are used to develop new features and bugfixes for the upcoming release. They are usually named similarly to feature/my-feature.</p>
<div align=center>
<p><img src="./figures/feature-branch-with-labels.png" alt="" /></p>
</div>
<p>Feature branches often exist only in the developer’s repository, and are never pushed – however, if there are multiple people working on one feature, or if the feature will take a long time to develop, it’s typical to push them to the central repository (if only to make sure the code isn’t lost with a single disk failure).</p>
<h3 id="starting-a-feature-branch"><a class="header" href="#starting-a-feature-branch">Starting a feature branch</a></h3>
<p>To start a feature branch, simply create a new branch from <code>master</code>:</p>
<pre><code class="language-sh">$ git checkout -b feature/my-feature master
</code></pre>
<h2 id="finishing-a-feature-branch"><a class="header" href="#finishing-a-feature-branch">Finishing a feature branch</a></h2>
<p>Once work on the given feature is done, it needs to be integrated back into <code>master</code>. There are several ways this can be accomplished.</p>
<p>Note: the choice of the feature branch integration method is immaterial as far as the workflow is concerned. It should be based on personal or team preference, however the branching model will work exactly the same, regardless of which option is chosen. My personal recommendation is to use option #1.</p>
<h2 id="option-1---rebase"><a class="header" href="#option-1---rebase">Option #1 - <code>rebase</code></a></h2>
<p>This method uses Git’s <code>rebase</code> command (with the <code>-i</code>, meaning interactive, switch) to integrate the feature branch with <code>master</code>.</p>
<pre><code class="language-sh">$ git checkout feature/my-feature

$ git rebase -i master

$ git checkout master

$ git merge --ff-only feature/my-feature

$ git push origin master

$ git branch -d feature/my-feature
</code></pre>
<p>If you’re not yet well acquainted with the rebase command, I recommend <a href="https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History">this chapter</a> from the Pro Git SCM book.</p>
<p>Here’s a visual illustration of how that method works:</p>
<div align=center>
<p><img src="./figures/feature-branch-rebase-final.png" alt="" /></p>
</div>
<p><strong>Advantages of this method:</strong></p>
<ul>
<li>
<p>Rebasing before integrating with <code>master</code> allows you to clean up the branch history before making it public, resulting in better final history landing on <code>master</code>.</p>
</li>
<li>
<p>Linear history makes things simpler and easier to find, especially when looking at the per-file history.</p>
</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Reverting the entire feature requires reverting multiple commits.</li>
</ul>
<h2 id="option-2---merger--no-ff"><a class="header" href="#option-2---merger--no-ff">Option #2 - <code>merger -no-ff</code></a></h2>
<p>This is the method that GitFlow advocates.</p>
<pre><code class="language-sh">
$ git checkout master
$ git merge --no-ff feature/my-feature
$ git push origin master
$ git branch -d feature/my-feature
</code></pre>
<p>Visually:</p>
<div align=center>
<p><img src="./figures/feature-branch-merge-final.png" alt="" /></p>
</div>
<p><strong>Advantages of this method:</strong></p>
<ul>
<li>Reverting the entire feature requires reverting only one commit (the merge commit).</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>
<p>The feature branch history, which is often messy, gets put directly on <code>master</code>.</p>
</li>
<li>
<p>The proliferation of merge commits (especially as the number of developers on a project grows) makes the history unmanageable.</p>
</li>
</ul>
<h2 id="option-3---rebase--merge--no-ff"><a class="header" href="#option-3---rebase--merge--no-ff">Option #3 - <code>rebase</code> + <code>merge -no-ff</code></a></h2>
<p>This method is a combination of the previous two, trying to keep their advantages while simultaneously getting rid of the disadvantages:</p>
<pre><code class="language-sh">$ git checkout feature/my-feature

$ git rebase -i master

$ git checkout master

$ git merge --no-ff feature/my-feature

$ git push origin master

$ git branch -d feature/my-feature

</code></pre>
<p>Visually:</p>
<div align=center>
<p><img src="./figures/feature-branch-rebase-and-merge-final.png" alt="" /></p>
</div>
<p><strong>Advantages of this method:</strong></p>
<ul>
<li>Clean and almost linear history.</li>
<li>Easy to revert an entire feature with one commit.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>It’s difficult to enforce this method programmatically, so it has to rely on best-effort convention.</li>
</ul>
<p>Finally, regardless of the method used, if the feature branch was pushed to the central repository, you need to now remove it:</p>
<pre><code class="language-sh">$ git push origin :feature/my-feature
</code></pre>
<h2 id="release-branches"><a class="header" href="#release-branches">Release branches</a></h2>
<p>Release branches are created to prepare the software for being released. Obviously, what exactly that means varies on a project-per-project basis. This could be as simple as bumping the version number in the configuration, or involve things like code freezes, producing Release Candidates, and having a full QA process. The important thing is all that happens on a separate branch, so that day-to-day development can continue as usual on <code>master</code>.</p>
<p>The naming convention for these is <code>release/&lt;version-number&gt;</code>.</p>
<h2 id="starting-a-release-branch"><a class="header" href="#starting-a-release-branch">Starting a release branch</a></h2>
<p>Release branches also start from master, however they often don’t start from the tip – instead, they have their origin in whatever commit on master you think contains all of the features that you want to include in the given release.</p>
<p>For example, here we start the branch for the version <code>2.3.0</code> release on a commit with the hash <code>9efc5d</code>:</p>
<pre><code class="language-sh">$ git checkout -b release/2.3.0 9efc5d
</code></pre>
<h2 id="finishing-a-release-branch"><a class="header" href="#finishing-a-release-branch">Finishing a release branch</a></h2>
<p>Once whatever process you use for releasing is finished, the tip of the branch is tagged with the version number. After that, the branch needs to be merged into <code>master</code> to be versioned permanently:</p>
<pre><code class="language-sh">$ git checkout release/2.3.0

$ git tag 2.3.0

$ git checkout master

$ git merge release/2.3.0

$ git push --tags origin master

$ git branch -d release/2.3.0
</code></pre>
<p>Here’s a diagram illustrating the above commands (assuming the release took two commits):</p>
<div align=center>
<p><img src="./figures/release-branch-merge-final.png" alt="" /></p>
</div>
<p>Again, if you pushed the release branch to the central repository, you now need to delete it:</p>
<pre><code class="language-sh">$ git push origin :release/2.3.0
</code></pre>
<h2 id="hotfix-branches"><a class="header" href="#hotfix-branches">Hotfix branches</a></h2>
<p>Hotfix branches are very similar to release branches – they result in a new version of the project being released. Where they differ is their intentions – while release branches signify a planned production milestone, hotfix branches are most often an unwanted but necessary exception to the usual release cadence, typically because of some critical defect found in the latest release that needs to be fixed as soon as possible.</p>
<p>They are named <code>hotfix/&lt;version-number&gt;</code>. Note that if you use <a href="http://semver.org/http://semver.org/">Semantic Versioning</a>, regular releases bump either the Major or Minor number, while hotfixes bump the Patch number.</p>
<p>Starting a hotfix branch
Hotfix branches are cut from the commit that the latest version tag points to. Continuing our example from the release branch:</p>
<pre><code class="language-sh">$ git checkout -b hotfix/2.3.1 2.3.0
</code></pre>
<h2 id="finishing-a-hotfix-branch"><a class="header" href="#finishing-a-hotfix-branch">Finishing a hotfix branch</a></h2>
<p>Finishing a hotfix branch is pretty much the same as finishing a release branch: tag the tip, merge it to <code>master</code>, then delete the branch.</p>
<pre><code class="language-sh">$ git checkout hotfix/2.3.1

$ git tag 2.3.1

$ git checkout master

$ git merge hotfix/2.3.1

$ git push --tags origin master

$ git branch -d hotfix/2.3.1
</code></pre>
<p>Here’s a visual illustration:</p>
<div align=center>
<p><img src="./figures/hotfix-branch-merge-final.png" alt="" /></p>
</div>
<p>There is one special case when finishing a hotfix branch. If a release branch has already been cut in preparation for the next release before the hotfix was finished, you need to merge the hotfix branch not to <code>master</code>, but to the release branch. Otherwise, the new release will bring back the original bug that the hotfix corrected. The fix will eventually get to <code>master</code> – when the release branch is merged back to it.</p>
<p>As always, if the hotfix branch was pushed to the central repository, you need to remove it now:</p>
<pre><code class="language-sh">$ git push origin :hotfix/2.3.1
</code></pre>
<h1 id="variation--develop--master"><a class="header" href="#variation--develop--master"># Variation – <code>develop</code> + <code>master</code></a></h1>
<p>There is one small wrinkle with the branching model described above. In order to find the latest production version of the code, you need to look at all of the tags in the repository, and checkout the latest one.</p>
<p>This problem has a very simple solution. You add another, ‘latest’, long-lived branch, whose only purpose is to point to the last released commit. Each time the version number is bumped, the ‘latest’ branch is fast-forwarded to the newly created tag.</p>
<p>So, that’s all great, but there is one small issue left. It would be very cool, especially for open-source projects, if the default branch that people got when cloning the repository was this ‘latest’ branch, which contains stable code, instead of the ‘working’ (what was called <code>master</code> in the above description) branch, which contains the work-in-progress on the yet-unreleased next version, which might not be very stable.</p>
<p>The simplest solution to this problem is to take advantage of the fact that <code>master</code> is the default branch in Git. So, we call the ‘latest’ branch <code>master</code>. However, that means we need to find a new name for the ‘working’ branch. In this description, we will re-use the GitFlow convention, and call it <code>develop</code> (of course, you are free to call it whatever you want in your project).</p>
<p>For clarity, I will show all of the workflow operations again, this time using this new naming. However, I want to emphasize that, other than a slight name change and the introduction of a new ‘marker’ branch, the workflow is exactly the same as was described above.</p>
<h2 id="the-main-branches"><a class="header" href="#the-main-branches">The main branches</a></h2>
<p>This variation uses two branches: <code>develop</code>, which plays the same role as <code>master</code> above, and <code>master</code>, which points at the latest release tag.</p>
<h2 id="feature-branches-1"><a class="header" href="#feature-branches-1">Feature branches</a></h2>
<p>Feature branches work exactly the same as already explained, except you need to substitute <code>master</code> with <code>develop</code> in the description above.</p>
<h3 id="starting-a-feature-branch-1"><a class="header" href="#starting-a-feature-branch-1">Starting a feature branch</a></h3>
<pre><code class="language-sh">$ git checkout -b feature/my-feature develop
</code></pre>
<h3 id="finishing-a-feature-branch-1"><a class="header" href="#finishing-a-feature-branch-1">Finishing a feature branch</a></h3>
<p><strong>Option #1 – <code>rebase</code></strong></p>
<pre><code class="language-sh">$ git checkout feature/my-feature

$ git rebase -i develop

$ git checkout develop

$ git merge --ff-only feature/my-feature

$ git push origin develop

$ git branch -d feature/my-feature
</code></pre>
<p><strong>Option #2 – <code>merge –no-ff</code></strong></p>
<pre><code class="language-sh">$ git checkout develop

$ git merge --no-ff feature/my-feature

$ git push origin develop

$ git branch -d feature/my-feature
</code></pre>
<p><strong>Option #3 – <code>rebase</code> + <code>merge –no–ff</code></strong></p>
<pre><code class="language-sh">$ git checkout feature/my-feature

$ git rebase -i develop

$ git checkout develop

$ git merge --no-ff feature/my-feature

$ git push origin develop

$ git branch -d feature/my-feature
</code></pre>
<h2 id="release-branches-1"><a class="header" href="#release-branches-1">Release branches</a></h2>
<p>Release branches work the same as described above (with <code>master</code> substituted for <code>develop</code>, of course), except one small detail. There is an extra step when finishing the release branch: fast-forwarding the marker branch to the newly created release <code>tag</code>.</p>
<h3 id="starting-a-release-branch-1"><a class="header" href="#starting-a-release-branch-1">Starting a release branch</a></h3>
<pre><code class="language-sh">$ git checkout -b release/2.3.0 9efc5d
</code></pre>
<h3 id="finishing-a-release-branch-1"><a class="header" href="#finishing-a-release-branch-1">Finishing a release branch</a></h3>
<pre><code class="language-sh">$ git checkout release/2.3.0

$ git tag 2.3.0

$ git checkout develop

$ git merge release/2.3.0

$ git push --tags origin develop

$ git branch -d release/2.3.0
</code></pre>
<p>And here is the extra step – fast-forwarding <code>master</code> to the latest release tag:</p>
<pre><code class="language-sh">$ git checkout master

$ git merge --ff-only 2.3.0

$ git push origin master
</code></pre>
<p>Here’s a visualization of the state of the repository after finishing the release branch:</p>
<div align=center>
<p><img src="./figures/develop-release-branch-merge.png" alt="" /></p>
</div>
<h2 id="hotfix-branches-1"><a class="header" href="#hotfix-branches-1">Hotfix branches</a></h2>
<p>Hotfix branches, because they result in publishing a new version as well, also require the additional step of fast-forwarding <code>master</code> to the newly created <code>tag</code>.</p>
<h3 id="starting-a-hotfix-branch"><a class="header" href="#starting-a-hotfix-branch">Starting a hotfix branch</a></h3>
<p>Because <code>master</code> always tracks the latest tag, creating a <code>hotfix</code> branch is a tiny bit easier in this variant (note however that you still need to look at the tags to determine what the previous version number was, in order to name your <code>hotfix</code> branch correctly):</p>
<pre><code class="language-sh">$ git checkout -b hotfix/2.3.1 `master`
</code></pre>
<h3 id="finishing-a-hotfix-branch-1"><a class="header" href="#finishing-a-hotfix-branch-1">Finishing a hotfix branch</a></h3>
<pre><code class="language-sh">$ git checkout hotfix/2.3.1

$ git tag 2.3.1

$ git checkout develop

$ git merge hotfix/2.3.1

$ git push --tags origin develop

$ git branch -d hotfix/2.3.1
</code></pre>
<p>And here is the additional step of fast-forwarding <code>master</code> to the latest release <code>tag</code>:</p>
<pre><code class="language-sh">$ git checkout master

$ git merge --ff-only 2.3.1

$ git push origin master
</code></pre>
<p>If we continue our release example, the visual illustration looks something</p>
<div align=center>
<p><img src="./figures/hotfix-branch-merge-final.png" alt="" /></p>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../BranchingModel/BranchingModel.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../AntiPatterns/AntiPatterns.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../BranchingModel/BranchingModel.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../AntiPatterns/AntiPatterns.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
